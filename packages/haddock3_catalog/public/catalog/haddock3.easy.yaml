title: Haddock 3 on easy level
categories:
- name: topology
  description: HADDOCK3 modules to create topologies.
  collapsed: false
- name: sampling
  description: HADDOCK3 modules for sampling.
  collapsed: false
- name: refinement
  description: HADDOCK3 actions referring to refinement.
  collapsed: false
- name: scoring
  description: HADDOCK3 modules to score models.
  collapsed: false
- name: analysis
  description: HADDOCK3 modules related to model analysis.
  collapsed: false
- name: extras
  description: '

    HADDOCK3 extra modules.


    The extra modules are modules that do not belong to any of the standard

    simulation categories but that help further configuring the workflow.

    '
  collapsed: true
global:
  schema:
    type: object
    properties:
      run_dir:
        title: Run directory
        description: Folder to store the HADDOCK3 run
        $comment: The new folder that will be created to save the HADDOCK3 run
        type: string
        format: uri-reference
      molecules:
        title: Input Molecules
        description: The input molecules that will be used for docking.
        $comment: Molecules must be provided in PDB format. These PDB files can be
          single molecules or ensembles using the MODEL/ENDMDL statements.
        type: array
        minItems: 1
        maxItems: 20
        items:
          type: string
          format: uri-reference
        format: moleculefilepaths
      preprocess:
        default: false
        title: Tries to correct input PDBs
        description: If true, evaluates and tries to correct the input PDB before
          the workflow.
        $comment: HADDOCK3 checks and processes the input PDB files to ensure they
          all comply with HADDOCK3's requirements. These checks concerns, for example,
          residue numbering, compatibility of chain IDs, and many others. You can
          see all checks performs in the live issue https://github.com/haddocking/haddock3/issues/143.
          If set to false, no checks are performed and HADDOCK3 directly uses the
          original input PDBs.
        type: boolean
      postprocess:
        default: true
        title: Executes haddock3-analyse on the CAPRI folders at the end of the run
        description: If true, executes haddock3-analyse on the CAPRI folders at the
          end of the workflow
        $comment: haddock3-analyse is a cli (see https://github.com/haddocking/haddock3/blob/main/src/haddock/clis/cli_analyse.py)
          used to plot the results of a HADDOCK3 workflow. If this option, this command
          is automatically executed at the end of the workflow (on the caprieval folders).
        type: boolean
      cns_exec:
        title: Path to the CNS executable
        description: If not provided, HADDOCK3 will use the cns path configured during
          the installation.
        $comment: CNS is a required component to run HADDOCK. Ideally it should have
          been configured during installation. If not you can specify with the cns_exec
          parameter its path.
        type: string
        format: uri-reference
      ncores:
        default: 8
        title: Number of CPU cores
        description: Number of CPU cores to use for the CNS calculations. It is truncated
          to max available CPUs  minus 1.
        $comment: Number of CPU cores to use for the CNS calculations. This will define
          the number of concurrent jobs being executed. Note that is truncated to
          the total number of available CPUs minus 1.
        type: number
        maximum: 500
        minimum: 1
      mode:
        default: local
        title: Mode of execution
        description: Mode of execution of the jobs, either local or using a batch
          system.
        $comment: Mode of execution of the jobs, either local or using a batch system.
          Currently slurm and torque are supported. For the HPC mode the queue command
          must be specified in the queue parameter.
        type: string
        minLength: 0
        maxLength: 20
        enum:
        - local
        - hpc
      batch_type:
        default: slurm
        title: Batch system
        description: Type of batch system running on your server
        $comment: Type of batch system running on your server. Only slurm and torque
          are supported at this time
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - slurm
        - torque
      queue:
        title: Queue name
        description: Name of the batch queue to which jobs will be submitted
        $comment: Name of the batch queue to which jobs will be submitted. If not
          defined the batch system default will be used.
        type: string
        minLength: 0
        maxLength: 100
      queue_limit:
        default: 100
        title: Number of jobs to submit to the batch system
        description: Number of jobs to submit to the batch system
        $comment: This parameter controls the number of jobs that will be submitted
          to the batch system. In combination with the concat parameter this allow
          to limit the load on the queueing system and also make sure jobs remain
          in the queue for some time (if concat > 1) to avoid high system loads on
          the batch system.
        type: number
        maximum: 9999
        minimum: 1
      concat:
        default: 1
        title: Number of models to produce per job.
        description: Multiple models can be calculated within one job
        $comment: This defines the number of models that will be generated within
          on job script. This allows to concatenate the generation of models into
          one script. In that way jobs might run longer in the batch system and reduce
          the load on the scheduler.
        type: number
        maximum: 9999
        minimum: 1
      clean:
        default: true
        title: Clean the module output files.
        description: Clean the module if run succeeds by compressing or removing output
          files.
        $comment: When running haddock through the command-line, the 'clean' parameter
          will instruct the workflow to clean the output files of the module if the
          whole run succeeds. In this process, PDB and PSF files are compressed to
          gzip, with the extension `.gz`. While files with extension `.seed`, `.inp`,
          and `.out` files are archived, and the original files deleted. The time
          to perform a cleaning operation depends on the number of files in the folders
          and the size of the files. However, it should not represent a limit step
          in the workflow. For example, a rigidbody sampling 10,000 structures takes
          about 4 minutes in our servers. This operation uses as many cores as allowed
          by the user in the 'ncores' parameter. SSD disks will perform faster by
          definition. See also the 'haddock3-clean' and 'haddock3-unpack' command-line
          clients.
        type: boolean
    required:
    - run_dir
    additionalProperties: false
  uiSchema:
    molecules:
      items:
        ui:widget: file
        ui:options:
          accept: .pdb
      ui:indexable: true
    cns_exec:
      ui:widget: file
      ui:group: execution
    ncores:
      ui:group: execution
    mode:
      ui:group: execution
    batch_type:
      ui:group: execution
    queue:
      ui:group: execution
    queue_limit:
      ui:group: execution
    concat:
      ui:group: execution
    clean:
      ui:group: clean
  tomlSchema: {}
nodes:
- id: alascan
  category: analysis
  label: HADDOCK3 module for alanine scan.
  description: HADDOCK3 module for alanine scan.
  schema:
    type: object
    properties:
      int_cutoff:
        default: 5.0
        title: "Distance cutoff (\xC5) used to define interface contacts."
        description: "Distance cutoff (\xC5) used to define interface contacts between\
          \ two interacting molecules."
        $comment: "Distance cutoff (\xC5) used to define interface contacts between\
          \ two interacting molecules."
        type: number
        maximum: 20.0
        minimum: 1.0
      output:
        default: false
        title: Dump all the models in the output folder
        description: Dump all the models in the output folder with the delta_score
          written in the b-factor column.
        $comment: Dump all the models in the output folder with the delta_score written
          in the b-factor column.
        type: boolean
      scan_residue:
        default: ALA
        title: Residue to be used for the scanning
        description: Residue to be used for the scanning. The default is alanine.
        $comment: Residue to be used for the scanning. The default is alanine. Use
          bigger residues at your own risk.
        type: string
        minLength: 3
        maxLength: 3
        enum:
        - ALA
        - ARG
        - ASN
        - ASP
        - CYS
        - GLN
        - GLU
        - GLY
        - HIS
        - ILE
        - LEU
        - LYS
        - MET
        - PHE
        - PRO
        - SER
        - THR
        - TRP
        - TYR
        - VAL
        - ALY
        - ASH
        - CFE
        - CSP
        - CYC
        - CYF
        - CYM
        - DDZ
        - GLH
        - HLY
        - HY3
        - HYP
        - M3L
        - MLY
        - MLZ
        - MSE
        - NEP
        - PNS
        - PTR
        - SEP
        - TOP
        - TYP
        - TYS
      plot:
        default: false
        title: Plot scanning data.
        description: Plot scanning data.
        $comment: Plot scanning data.
        type: boolean
    required: []
    additionalProperties: false
  uiSchema:
    int_cutoff:
      ui:group: analysis
    output:
      ui:group: analysis
    scan_residue:
      ui:group: analysis
    plot:
      ui:group: analysis
  tomlSchema: {}
- id: caprieval
  category: analysis
  label: Calculate CAPRI metrics.
  description: HADDOCK3 module to calculate the CAPRI metrics.
  schema:
    type: object
    properties:
      reference_fname:
        title: Reference structure
        description: Structure to be used when calculating the CAPRI metrics.
        $comment: Reference tructure to be used when calculating the CAPRI metrics.
          If none is defined then the lowest scoring model is selected by default.
        type: string
        format: uri-reference
      irmsd:
        default: true
        title: Calculate I-RMSD
        description: Performs Interface RMSD calculations.
        $comment: Calculates the Interface Root Mean Square Deviation. This calculate
          the RMSD of interface backbone atoms after fitting on the interface backbone
          atoms. The interface is idenfied based on intermolecular contacts shorter
          than the defined irmsd_cutoff.
        type: boolean
      fnat:
        default: true
        title: Calculate FNAT
        description: Performs FNAT calculations.
        $comment: Calculates the Fraction of Native Contacts. This evaluates how many
          contacts observed in the reference are present in the model. The distance
          cutoff used to define intermolecular contacts is defined by the fnat_cutoff
          parameter.
        type: boolean
      lrmsd:
        default: true
        title: Calculate L-RMSD
        description: Performs Ligand RMSD calculations.
        $comment: Calculates the Ligand Root Mean Square Deviation. This calculation
          is done by superimposing the receptors (defined by the receptor_chain parameter)
          and then evaluating the RMSD on the ligands (defined by the ligand_chains
          parameter). Superposition and RMSD calculations are done on backbone heavy
          atoms.
        type: boolean
      ilrmsd:
        default: true
        title: Calculate I-L-RMSD
        description: Performs Interface Ligand RMSD calculations.
        $comment: Calculates the Interface Ligand Root Mean Square Deviation. This
          calculation is done by superimposing the model and the target on the interface
          backbone atoms of the receptor (defined by the receptor_chain parameter)
          and calculating the RMSD on all heavy atoms of the ligand (defined by the
          ligand_chains parameter).
        type: boolean
      dockq:
        default: true
        title: Calculate DockQ
        description: Evaluate DockQ.
        $comment: Evaluate DockQ. A single continuous quality measure for protein
          docked models based on the CAPRI criteria, a combination of i-RMSD, l-RMSD
          and FNAT value. For details check the DockQ publication `DOI:10.1371/journal.pone.0161879`
        type: boolean
      irmsd_cutoff:
        default: 10.0
        title: "Distance cutoff (\xC5) used to define interface residues."
        description: "Distance cutoff (\xC5) used to define interface residues based\
          \ on intermolecular contacts."
        $comment: "Distance cutoff (\xC5) used to define interface residues based\
          \ on intermolecular contacts."
        type: number
        maximum: 20.0
        minimum: 3.0
      fnat_cutoff:
        default: 5.0
        title: "Distance cutoff (\xC5) used to define interface contacts."
        description: "Distance cutoff (\xC5) used to define interface contacts between\
          \ two interacting molecules."
        $comment: "Distance cutoff (\xC5) used to define interface contacts between\
          \ two interacting molecules."
        type: number
        maximum: 20.0
        minimum: 3.0
      receptor_chain:
        default: A
        title: Receptor ChainID
        description: Receptor ChainID to be considered for the RMSD calculations.
        $comment: Receptor ChainID to be considered for the RMSD calculations. This
          determines which chain will be treated as the receptor for the L-RMSD and
          for I-L-RMSD.
        type: string
        minLength: 1
        maxLength: 1
        format: chain
      ligand_chains:
        default:
        - B
        title: Ligand ChainIDs
        description: Ligand ChainIDs to be considered for the RMSD calculations.
        $comment: Ligand ChainIDs to be considered for the RMSD calculations. This
          determines which chains will be treated as the ligand for the L-RMSD and
          for I-L-RMSD.
        type: array
        minItems: 0
        maxItems: 100
        items:
          type: string
          format: chain
      sortby:
        default: score
        title: Sort the structures/clusters in the output file by this value
        description: Which value should be used to sort the output.
        $comment: Which value should be used to sort the output, the output table
          will be sorted accordingly.
        type: string
        minLength: 0
        maxLength: 20
        enum:
        - score
        - irmsd
        - lrmsd
        - ilrmsd
        - fnat
        - dockq
      sort_ascending:
        default: true
        title: Sort in ascending order
        description: Sort in ascending order.
        $comment: Sort in ascending order.
        type: boolean
      alignment_method:
        default: sequence
        title: Alignment method used to match the numbering.
        description: Which alignment method should be used to match the numbering.
        $comment: Alignment method used to match the numbering. Sequence alignment
          is haddock3-friendly but might not produce best results for structures that
          are too different, for that use
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - structure
        - sequence
      lovoalign_exec:
        title: Location (path) of the LovoAlign executable
        description: Location (path) of the LovoAlign executable.
        $comment: Location (path) of the LovoAlign executable.
        type: string
        minLength: 0
        maxLength: 200
      clt_threshold:
        default: 4
        title: Threshold (n) used for the average evaluation in the cluster-based
          output
        description: Threshold (n) used for the average evaluation in the cluster-based
          output.
        $comment: Threshold (n) used for the average evaluation in the cluster-based
          output.
        type: number
        maximum: 1000
        minimum: 1
    required: []
    additionalProperties: false
  uiSchema:
    reference_fname:
      ui:widget: file
      ui:group: analysis
    irmsd:
      ui:group: analysis
    fnat:
      ui:group: analysis
    lrmsd:
      ui:group: analysis
    ilrmsd:
      ui:group: analysis
    dockq:
      ui:group: analysis
    irmsd_cutoff:
      ui:group: analysis
    fnat_cutoff:
      ui:group: analysis
    receptor_chain:
      ui:group: analysis
    ligand_chains:
      ui:group: analysis
    sortby:
      ui:group: analysis
    sort_ascending:
      ui:group: analysis
    alignment_method:
      ui:group: analysis
    lovoalign_exec:
      ui:group: analysis
    clt_threshold:
      ui:group: analysis
  tomlSchema: {}
- id: clustfcc
  category: analysis
  label: Cluster modules with FCC.
  description: HADDOCK3 module for clustering with FCC.
  schema:
    type: object
    properties:
      contact_distance_cutoff:
        default: 5.0
        title: Cutoff distance (A) for contact detection.
        description: Cutoff distance (A) for contact detection. By default 5.0 Angstroms.
        $comment: Cutoff distance between two atoms for contact detection. By default
          5.0 Angstroms.
        type: number
        maximum: 999.99
        minimum: 2.0
      clust_cutoff:
        default: 0.6
        title: Minimum fraction of common contacts to be considered in a cluster.
        description: Minimum fraction of common contacts to be considered in a cluster.
          By default 0.6.
        $comment: Minimum fraction of common contacts (fcc) to cluster complexes together.
          Complexes not sharing fraction of common contacts above the `fraction_cutoff`
          parameter cannot belong to the same cluster.
        type: number
        maximum: 1.0
        minimum: 0.0
      min_population:
        default: 4
        title: Clustering population threshold.
        description: Threshold employed to exclude clusters with less than this number
          of members. By default 4.
        $comment: Minimum set of grouped complexes to define a cluster. If a potential
          cluster is composed of less than this number of members, it will be considered
          as `singleton` and discarded from final clusters. If set to 1, all complexes
          will be part of a cluster. By default 4.
        type: number
        maximum: 9999
        minimum: 1
      strictness:
        default: 0.75
        title: Strictness factor.
        description: Strictness factor. It's multiplied by the fraction_cutoff to
          obtain a new cutoff for the second half of the matrix. By default 0.75.
        $comment: Strictness factor. It's multiplied by the fraction_cutoff to obtain
          a new cutoff for the second half of the matrix. Used to allow for some variability.
          By default 0.75.
        type: number
        maximum: 1.0
        minimum: 0.0
    required: []
    additionalProperties: false
  uiSchema:
    contact_distance_cutoff:
      ui:group: analysis
    clust_cutoff:
      ui:group: analysis
    min_population:
      ui:group: analysis
    strictness:
      ui:group: analysis
  tomlSchema: {}
- id: clustrmsd
  category: analysis
  label: RMSD clustering module.
  description: HADDOCK3 module for clustering with RMSD.
  schema:
    type: object
    properties:
      min_population:
        default: 4
        title: Clustering population threshold
        description: Threshold employed to exclude clusters with less than this number
          of members. By default 4.
        $comment: Threshold employed to exclude clusters with less than this number
          of members. By default 4. When criterion is maxclust, this value is ignored.
        type: number
        maximum: 9999
        minimum: 1
      clust_cutoff:
        default: 7.5
        title: Clustering cutoff distance
        description: Value of cutoff cophenetic distance.
        $comment: Value of cutoff cophenetic distance. When criterion is maxclust,
          this value is ignored.
        type: number
        maximum: 9999
        minimum: 1
      n_clusters:
        default: 4
        title: Number of clusters
        description: Number of clusters to be formed
        $comment: Number of clusters to be formed. When criterion is distance, this
          value is ignored.
        type: number
        maximum: 9999
        minimum: 1
    required: []
    additionalProperties: false
  uiSchema:
    min_population:
      ui:group: analysis
    clust_cutoff:
      ui:group: analysis
    n_clusters:
      ui:group: analysis
  tomlSchema: {}
- id: contactmap
  category: analysis
  label: Compute contacts and generate heatmaps.
  description: HADDOCK3 module to compute complexes contacts and generate heatmap.
  schema:
    type: object
    properties:
      ca_ca_dist_threshold:
        default: 9.0
        title: Ca-Ca distance defining a contact.
        description: Distance between Ca atoms of two residues defining a contact.
        $comment: Distance between Ca atoms of two residues defining a contact.
        type: number
        maximum: 1000.0
        minimum: 4.0
      shortest_dist_threshold:
        default: 4.5
        title: Distance defining a contact between two residues.
        description: Shortest distance between any atom of two residues defining a
          contact.
        $comment: Shortest distance between any atom of two residues defining a contact.
        type: number
        maximum: 1000.0
        minimum: 2.0
      color_ramp:
        default: Greys
        title: Color ramp used to color heatmap.
        description: Color ramp used to color heatmap.
        $comment: Color ramp used to color heatmap. Please refer to `plotly builtin-colorscales`
          for more information
        type: string
        minLength: 3
        maxLength: 10
        enum:
        - Greys
        - Purples
        - BuPu
        - Blues
        - BuGn
        - Greens
        - deep
        - tempo
        - algae
        - dense
        - amp
      single_model_analysis:
        default: false
        title: Analyse contacts at single model level.
        description: Analyse contacts at single model level.
        $comment: In addition to cluster analysis, also perform single model analyses.
        type: boolean
      generate_heatmap:
        default: true
        title: Generate contact heatmap.
        description: Generate plotly heatmap matrix representation of the contacts.
        $comment: Uses generated contact matrices files to generate heatmap.
        type: boolean
      generate_chordchart:
        default: true
        title: Generate chordchart.
        description: Generate plotly chordchart representation of the contacts.
        $comment: Uses generated contact matrices files to generate chord chart.
        type: boolean
      cluster_heatmap_datatype:
        default: shortest-cont-ratio
        title: Type of data to be used in the heatmap.
        description: Type of data to be used in the heatmap.
        $comment: ca-ca-dist and shortest-dist are averages distances observed in
          cluster. While ca-ca-cont-ratio and shortest-cont-ratio are ratio of the
          distances to be observed under their respective thresholds.
        type: string
        minLength: 5
        maxLength: 30
        enum:
        - ca-ca-dist
        - ca-ca-cont-ratio
        - shortest-dist
        - shortest-cont-ratio
      chordchart_datatype:
        default: shortest-dist
        title: Type of data to be used in the chordchart.
        description: Type of data to be used in the chordchart.
        $comment: ca-ca-dist and shortest-dist are averages distances observed in
          cluster.
        type: string
        minLength: 5
        maxLength: 30
        enum:
        - ca-ca-dist
        - shortest-dist
    required: []
    additionalProperties: false
  uiSchema:
    ca_ca_dist_threshold:
      ui:group: analysis
    shortest_dist_threshold:
      ui:group: analysis
    color_ramp:
      ui:group: analysis
    single_model_analysis:
      ui:group: analysis
    generate_heatmap:
      ui:group: analysis
    generate_chordchart:
      ui:group: analysis
    cluster_heatmap_datatype:
      ui:group: analysis
    chordchart_datatype:
      ui:group: analysis
  tomlSchema: {}
- id: emref
  category: refinement
  label: Energy minimization refinement with CNS.
  description: HADDOCK3 module energy minimization refinement.
  schema:
    type: object
    properties:
      mol_shape:
        type: array
        maxItemsFrom: molecules
        items:
          default: false
          title: Is the molecule a shape?
          description: Defines a molecule as a shape.
          $comment: Defines a molecule as a shape, which is a collection of beads.
          type: boolean
      ambig_fname:
        title: Ambiguous distance restraints filename
        description: Filename of the ambiguous distance restraints file
        $comment: Filename of the ambiguous distance restraints file. By default 50%
          of those restraints will be randomly discared. This can be changed/turned
          off and is controlled by the randremoval and npart parameters. Note that
          this file can contain both ambiguous and unambiguous restraints.
        type: string
        format: uri-reference
      unambig_fname:
        title: Unambiguous restraints filename
        description: Filename of the unambiguous distance restraints file
        $comment: Filename of the unambiguous distance restraints file. All restraints
          in that file will be used. Note that this file can contain both ambiguous
          and unambiguous restraints.
        type: string
        format: uri-reference
      hbond_fname:
        title: H-bond restraints filename
        description: Filename of the hydrogen bond distance restraints file
        $comment: Filename of the hydrogen bond distance restraints file. Note that
          this file can contain any type of distance restraints.
        type: string
        format: uri-reference
      dihe_fname:
        title: Dihedral angle restraints filename
        description: Filename of the Dihedral angle restraints file
        $comment: Filename of the Dihedral angle restraints file.
        type: string
        format: uri-reference
      dihedrals_on:
        default: false
        title: Use dihedral angle restraints
        description: Turns on dihedral angle restraints.
        $comment: Turns on dihedral angle restraints. Those should be defined in the
          dihe_fname file.
        type: boolean
      dihedrals_scale:
        default: 200
        title: Force constant for dihedral angle restraints
        description: Force constant applied to the dihedral angle restraints read
          from dihe_fname.
        $comment: Force constant applied to the dihedral angle restraints read from
          dihe_fname.
        type: number
        maximum: 9999
        minimum: -9999
      ssdihed:
        default: none
        title: Define automatically backbone dihedral angle restraints
        description: If turned on, this option will automatically defined backbone
          dihedral angle restraints for the selected regions.
        $comment: This option allows to utomatically defined backbone dihedral angle
          restraints for the selected regions. The restraints will be defined for
          the phi and psi backbone dihedral angles of amino acids, with the target
          value taken from the measured angle in the input structure, and the error
          bound defined by the error_dih parameter. Those restraints can be applied
          to the entire structure (all), the alpha/beta secondary structure elements
          (alphabeta) or only to the alpha helical regions (alpha). Those are automatically
          detected based on the measured dihedral angle combinations.
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - none
        - all
        - alpha
        - alphabeta
      error_dih:
        default: 10
        title: Force constant for backbone dihedral angle restraints
        description: Force constant for backbone dihedral angle restraints (ssdihed
          option)
        $comment: Force constant for backbone dihedral angle restraints (ssdihed option)
        type: number
        maximum: 9999
        minimum: -9999
      dnarest_on:
        default: false
        title: Restrain the DNA conformation
        description: Automatically creates restraints to maintain the conformation
          of DNA/RNA
        $comment: 'This option allows to restraint the conformation of nucleic acids
          based on the values from the input structures. The following restraints
          will be automatically defined: - single base planarity - sugar pucker -
          phosphate backbone diherdral angle restraints - Watson-Crick base pairing'
        type: boolean
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
    required: []
    additionalProperties: false
  uiSchema:
    mol_shape:
      ui:indexable: true
      ui:group: molecule
    ambig_fname:
      ui:widget: file
      ui:group: distance restraints
    unambig_fname:
      ui:widget: file
      ui:group: distance restraints
    hbond_fname:
      ui:widget: file
      ui:group: distance restraints
    dihe_fname:
      ui:widget: file
      ui:group: dihedral restraints
    dihedrals_on:
      ui:group: dihedral restraints
    dihedrals_scale:
      ui:group: dihedral restraints
    ssdihed:
      ui:group: dihedral restraints
    error_dih:
      ui:group: dihedral restraints
    dnarest_on:
      ui:group: other restraints
    elecflag:
      ui:group: force field
  tomlSchema:
    mol_shape:
      indexed: true
- id: emscoring
  category: scoring
  label: EM scoring module.
  description: HADDOCK3 module to perform energy minimization scoring.
  schema:
    type: object
    properties:
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
    required: []
    additionalProperties: false
  uiSchema:
    elecflag:
      ui:group: force field
  tomlSchema: {}
- id: exit
  category: extras
  label: Exit module
  description: Stop the workflow when this module is reached.
  schema:
    type: object
    properties:
      message:
        default: Stopping the workflow.
        title: Exiting message.
        description: The message to print when exiting.
        $comment: The message to print when exiting.
        type: string
        minLength: 0
        maxLength: 1000
    required: []
    additionalProperties: false
  uiSchema: {}
  tomlSchema: {}
- id: flexref
  category: refinement
  label: Flexible refinement with CNS.
  description: HADDOCK3 module for flexible refinement.
  schema:
    type: object
    properties:
      mol_shape:
        type: array
        maxItemsFrom: molecules
        items:
          default: false
          title: Is the molecule a shape?
          description: Defines a molecule as a shape.
          $comment: Defines a molecule as a shape, which is a collection of beads.
          type: boolean
      ambig_fname:
        title: Ambiguous distance restraints filename
        description: Filename of the ambiguous distance restraints file
        $comment: Filename of the ambiguous distance restraints file. By default 50%
          of those restraints will be randomly discared. This can be changed/turned
          off and is controlled by the randremoval and npart parameters. Note that
          this file can contain both ambiguous and unambiguous restraints.
        type: string
        format: uri-reference
      unambig_fname:
        title: Unambiguous restraints filename
        description: Filename of the unambiguous distance restraints file
        $comment: Filename of the unambiguous distance restraints file. All restraints
          in that file will be used. Note that this file can contain both ambiguous
          and unambiguous restraints.
        type: string
        format: uri-reference
      hbond_fname:
        title: H-bond restraints filename
        description: Filename of the hydrogen bond distance restraints file
        $comment: Filename of the hydrogen bond distance restraints file. Note that
          this file can contain any type of distance restraints.
        type: string
        format: uri-reference
      dihe_fname:
        title: Dihedral angle restraints filename
        description: Filename of the Dihedral angle restraints file
        $comment: Filename of the Dihedral angle restraints file.
        type: string
        format: uri-reference
      dihedrals_on:
        default: false
        title: Use dihedral angle restraints
        description: Turns on dihedral angle restraints.
        $comment: Turns on dihedral angle restraints. Those should be defined in the
          dihe_fname file.
        type: boolean
      ssdihed:
        default: none
        title: Define automatically backbone dihedral angle restraints
        description: If turned on, this option will automatically defined backbone
          dihedral angle restraints for the selected regions.
        $comment: This option allows to utomatically defined backbone dihedral angle
          restraints for the selected regions. The restraints will be defined for
          the phi and psi backbone dihedral angles of amino acids, with the target
          value taken from the measured angle in the input structure, and the error
          bound defined by the error_dih parameter. Those restraints can be applied
          to the entire structure (all), the alpha/beta secondary structure elements
          (alphabeta) or only to the alpha helical regions (alpha). Those are automatically
          detected based on the measured dihedral angle combinations.
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - none
        - all
        - alpha
        - alphabeta
      error_dih:
        default: 10
        title: Force constant for backbone dihedral angle restraints
        description: Force constant for backbone dihedral angle restraints (ssdihed
          option)
        $comment: Force constant for backbone dihedral angle restraints (ssdihed option)
        type: number
        maximum: 9999
        minimum: -9999
      dnarest_on:
        default: false
        title: Restrain the DNA conformation
        description: Automatically creates restraints to maintain the conformation
          of DNA/RNA
        $comment: 'This option allows to restraint the conformation of nucleic acids
          based on the values from the input structures. The following restraints
          will be automatically defined: - single base planarity - sugar pucker -
          phosphate backbone diherdral angle restraints - Watson-Crick base pairing'
        type: boolean
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
      sinter_rigid_final:
        default: 0.001
        title: End rigid-body MD intermolecular interactions scaling factor.
        description: End scaling factor for intermolecular interactions in the first
          cooling stage.
        $comment: End scaling factor applied to intermolecular interactions during
          the first cooling stage of the simulated annealing protocol.
        type: number
        maximum: 1
        minimum: 1.0e-05
    required: []
    additionalProperties: false
  uiSchema:
    mol_shape:
      ui:indexable: true
      ui:group: molecule
    ambig_fname:
      ui:widget: file
      ui:group: distance restraints
    unambig_fname:
      ui:widget: file
      ui:group: distance restraints
    hbond_fname:
      ui:widget: file
      ui:group: distance restraints
    dihe_fname:
      ui:widget: file
      ui:group: dihedral restraints
    dihedrals_on:
      ui:group: dihedral restraints
    ssdihed:
      ui:group: dihedral restraints
    error_dih:
      ui:group: dihedral restraints
    dnarest_on:
      ui:group: other restraints
    elecflag:
      ui:group: force field
  tomlSchema:
    mol_shape:
      indexed: true
- id: gdock
  category: sampling
  label: gdock integration sampling module.
  description: HADDOCK3 gdock module.
  schema:
    type: object
    properties:
      ambig_fname:
        type: string
        format: uri-reference
    required: []
    additionalProperties: false
  uiSchema:
    ambig_fname:
      ui:widget: file
  tomlSchema: {}
- id: ilrmsdmatrix
  category: analysis
  label: ilRMSD matrix module.
  description: HADDOCK3 module for clustering with RMSD.
  schema:
    type: object
    properties:
      receptor_chain:
        default: A
        title: Receptor ChainID
        description: Receptor ChainID to be considered for the RMSD calculations.
        $comment: Receptor ChainID to be considered for the RMSD calculations. This
          determines which chain will be treated as the receptor for the L-RMSD and
          for I-L-RMSD.
        type: string
        minLength: 1
        maxLength: 1
        format: chain
      ligand_chains:
        default:
        - B
        title: Ligand ChainIDs
        description: Ligand ChainIDs to be considered for the IL-RMSD calculations.
        $comment: Ligand ChainIDs to be considered for the IL-RMSD calculations. This
          determines which chains will be treated as the ligand for the IL-RMSD.
        type: array
        minItems: 0
        maxItems: 100
        items:
          type: string
          format: chain
    required: []
    additionalProperties: false
  uiSchema:
    receptor_chain:
      ui:group: analysis
    ligand_chains:
      ui:group: analysis
  tomlSchema: {}
- id: lightdock
  category: sampling
  label: LightDock integration sampling module.
  description: HADDOCK3 Lightdock module.
  schema:
    type: object
    properties:
      glowworms:
        default: 200
        type: number
        maximum: 9999
        minimum: -9999
      steps:
        default: 100
        type: number
        maximum: 9999
        minimum: -9999
      swarms:
        default: 400
        type: number
        maximum: 9999
        minimum: -9999
      scoring:
        default: fastdfire
        type: string
        minLength: 0
        maxLength: 100
      top:
        default: 10
        type: number
        maximum: 9999
        minimum: -9999
      receptor_chains:
        default: A
        type: string
        minLength: 0
        maxLength: 100
        format: chain
      receptor_active:
        type: string
        minLength: 0
        maxLength: 100
      receptor_passive:
        type: string
        minLength: 0
        maxLength: 100
      ligand_chains:
        default: B
        type: string
        minLength: 0
        maxLength: 100
        format: chain
      ligand_active:
        type: string
        minLength: 0
        maxLength: 100
      ligand_passive:
        type: string
        minLength: 0
        maxLength: 100
      noxt:
        default: true
        type: boolean
      noh:
        default: true
        type: boolean
      restraints:
        default: false
        type: boolean
    required: []
    additionalProperties: false
  uiSchema: {}
  tomlSchema: {}
- id: mdref
  category: refinement
  label: Water refinement with CNS.
  description: HADDOCK3 module for water refinement.
  schema:
    type: object
    properties:
      mol_shape:
        type: array
        maxItemsFrom: molecules
        items:
          default: false
          title: Is the molecule a shape?
          description: Defines a molecule as a shape.
          $comment: Defines a molecule as a shape, which is a collection of beads.
          type: boolean
      ambig_fname:
        title: Ambiguous distance restraints filename
        description: Filename of the ambiguous distance restraints file
        $comment: Filename of the ambiguous distance restraints file. By default 50%
          of those restraints will be randomly discared. This can be changed/turned
          off and is controlled by the randremoval and npart parameters. Note that
          this file can contain both ambiguous and unambiguous restraints.
        type: string
        format: uri-reference
      unambig_fname:
        title: Unambiguous restraints filename
        description: Filename of the unambiguous distance restraints file
        $comment: Filename of the unambiguous distance restraints file. All restraints
          in that file will be used. Note that this file can contain both ambiguous
          and unambiguous restraints.
        type: string
        format: uri-reference
      hbond_fname:
        title: H-bond restraints filename
        description: Filename of the hydrogen bond distance restraints file
        $comment: Filename of the hydrogen bond distance restraints file. Note that
          this file can contain any type of distance restraints.
        type: string
        format: uri-reference
      dihe_fname:
        title: Dihedral angle restraints filename
        description: Filename of the Dihedral angle restraints file
        $comment: Filename of the Dihedral angle restraints file.
        type: string
        format: uri-reference
      dihedrals_on:
        default: false
        title: Use dihedral angle restraints
        description: Turns on dihedral angle restraints.
        $comment: Turns on dihedral angle restraints. Those should be defined in the
          dihe_fname file.
        type: boolean
      ssdihed:
        default: none
        title: Define automatically backbone dihedral angle restraints
        description: If turned on, this option will automatically defined backbone
          dihedral angle restraints for the selected regions.
        $comment: This option allows to utomatically defined backbone dihedral angle
          restraints for the selected regions. The restraints will be defined for
          the phi and psi backbone dihedral angles of amino acids, with the target
          value taken from the measured angle in the input structure, and the error
          bound defined by the error_dih parameter. Those restraints can be applied
          to the entire structure (all), the alpha/beta secondary structure elements
          (alphabeta) or only to the alpha helical regions (alpha). Those are automatically
          detected based on the measured dihedral angle combinations.
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - none
        - all
        - alpha
        - alphabeta
      error_dih:
        default: 10
        title: Force constant for backbone dihedral angle restraints
        description: Force constant for backbone dihedral angle restraints (ssdihed
          option)
        $comment: Force constant for backbone dihedral angle restraints (ssdihed option)
        type: number
        maximum: 1000
        minimum: 0
      dnarest_on:
        default: false
        title: Restrain the DNA conformation
        description: Automatically creates restraints to maintain the conformation
          of DNA/RNA
        $comment: 'This option allows to restraint the conformation of nucleic acids
          based on the values from the input structures. The following restraints
          will be automatically defined: - single base planarity - sugar pucker -
          phosphate backbone diherdral angle restraints - Watson-Crick base pairing'
        type: boolean
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
      solvent:
        default: water
        title: Solvent
        description: Solvent to use during the short MD refinement
        $comment: Solvent to use during the short MD refinement. Water and DMSO are
          supported. A solvent shelll is generated by shifting pre-equilibrated boxes
          around the complex. For water an 8A water shell is generated and for DMSO
          a 12.5A shell. For DMSO,
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - water
        - dmso
    required: []
    additionalProperties: false
  uiSchema:
    mol_shape:
      ui:indexable: true
      ui:group: molecule
    ambig_fname:
      ui:widget: file
      ui:group: distance restraints
    unambig_fname:
      ui:widget: file
      ui:group: distance restraints
    hbond_fname:
      ui:widget: file
      ui:group: distance restraints
    dihe_fname:
      ui:widget: file
      ui:group: dihedral restraints
    dihedrals_on:
      ui:group: dihedral restraints
    ssdihed:
      ui:group: dihedral restraints
    error_dih:
      ui:group: dihedral restraints
    dnarest_on:
      ui:group: other restraints
    elecflag:
      ui:group: force field
  tomlSchema:
    mol_shape:
      indexed: true
- id: mdscoring
  category: scoring
  label: MD scoring module.
  description: HADDOCK3 module to perform energy minimization scoring.
  schema:
    type: object
    properties:
      ssdihed:
        default: none
        title: Define automatically backbone dihedral angle restraints
        description: If turned on, this option will automatically defined backbone
          dihedral angle restraints for the selected regions.
        $comment: This option allows to utomatically defined backbone dihedral angle
          restraints for the selected regions. The restraints will be defined for
          the phi and psi backbone dihedral angles of amino acids, with the target
          value taken from the measured angle in the input structure, and the error
          bound defined by the error_dih parameter. Those restraints can be applied
          to the entire structure (all), the alpha/beta secondary structure elements
          (alphabeta) or only to the alpha helical regions (alpha). Those are automatically
          detected based on the measured dihedral angle combinations.
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - none
        - all
        - alpha
        - alphabeta
      error_dih:
        default: 10
        title: Force constant for backbone dihedral angle restraints
        description: Force constant for backbone dihedral angle restraints (ssdihed
          option)
        $comment: Force constant for backbone dihedral angle restraints (ssdihed option)
        type: number
        maximum: 1000
        minimum: 0
      dnarest_on:
        default: false
        title: Restrain the DNA conformation
        description: Automatically creates restraints to maintain the conformation
          of DNA/RNA
        $comment: 'This option allows to restraint the conformation of nucleic acids
          based on the values from the input structures. The following restraints
          will be automatically defined: - single base planarity - sugar pucker -
          phosphate backbone diherdral angle restraints - Watson-Crick base pairing'
        type: boolean
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
      solvent:
        default: water
        title: Solvent
        description: Solvent to use during the short MD refinement
        $comment: Solvent to use during the short MD refinement. Water and DMSO are
          supported. A solvent shelll is generated by shifting pre-equilibrated boxes
          around the complex. For water an 8A water shell is generated and for DMSO
          a 12.5A shell. For DMSO,
        type: string
        minLength: 0
        maxLength: 100
        enum:
        - water
        - dmso
    required: []
    additionalProperties: false
  uiSchema:
    ssdihed:
      ui:group: dihedral restraints
    error_dih:
      ui:group: dihedral restraints
    dnarest_on:
      ui:group: other restraints
    elecflag:
      ui:group: force field
  tomlSchema: {}
- id: rigidbody
  category: sampling
  label: Rigid-body docking sampling module
  description: HADDOCK3 module for rigid body sampling.
  schema:
    type: object
    properties:
      mol_shape:
        type: array
        maxItemsFrom: molecules
        items:
          default: false
          title: Is the molecule a shape?
          description: Defines a molecule as a shape.
          $comment: Defines a molecule as a shape, which is a collection of beads.
          type: boolean
      ambig_fname:
        title: Ambiguous distance restraints filename
        description: Filename of the ambiguous distance restraints file
        $comment: Filename of the ambiguous distance restraints file. By default 50%
          of those restraints will be randomly discared. This can be changed/turned
          off and is controlled by the randremoval and npart parameters. Note that
          this file can contain both ambiguous and unambiguous restraints.
        type: string
        format: uri-reference
      unambig_fname:
        title: Unambiguous restraints filename
        description: Filename of the unambiguous distance restraints file
        $comment: Filename of the unambiguous distance restraints file. All restraints
          in that file will be used. Note that this file can contain both ambiguous
          and unambiguous restraints.
        type: string
        format: uri-reference
      hbond_fname:
        title: H-bond restraints filename
        description: Filename of the hydrogen bond distance restraints file
        $comment: Filename of the hydrogen bond distance restraints file. Note that
          this file can contain any type of distance restraints.
        type: string
        format: uri-reference
      sampling:
        default: 1000
        title: Number of models to generate
        description: Number of rigidbody docking models to generate
        $comment: Number of rigidbody docking models to generate
        type: number
        maximum: 50000
        minimum: 1
      randorien:
        default: true
        type: boolean
      elecflag:
        default: true
        title: Include electrostatics energy
        description: Include electrostatics energy during the calculations.
        $comment: Include electrostatics energy during the calculations. If set to
          false electrostatics will not be considered.
        type: boolean
    required: []
    additionalProperties: false
  uiSchema:
    mol_shape:
      ui:indexable: true
      ui:group: molecule
    ambig_fname:
      ui:widget: file
      ui:group: distance restraints
    unambig_fname:
      ui:widget: file
      ui:group: distance restraints
    hbond_fname:
      ui:widget: file
      ui:group: distance restraints
    sampling:
      ui:group: sampling
    randorien:
      ui:group: sampling
    elecflag:
      ui:group: force field
  tomlSchema:
    mol_shape:
      indexed: true
- id: rmsdmatrix
  category: analysis
  label: RMSD matrix module.
  description: HADDOCK3 module for clustering with RMSD.
  schema:
    type: object
    properties:
      max_models:
        default: 10000
        title: Maximum number of models to calculate RMSD matrix
        description: If the number of models exceeds max_models the execution is blocked
        $comment: If the number of models exceeds the few thousands, the calculation
          of the RMSD matrix is computationally demanding, especially in terms of
          CPU and disk space.
        type: number
        maximum: 20000
        minimum: 1
      resdic:
        default: {}
        title: List of residues
        description: The residue numbers that should be used in the alignment and
          in the RMSD calculation.
        $comment: resdic_* is an expandable parameter. You can provide resdic_A, resdic_B,
          resdic_C, etc, where the last capital letter is the chain identifier.
        type: object
        additionalProperties:
          type: array
          items:
            type: number
            format: residue
            minItems: 0
            maxItems: 100
          uniqueItems: true
          default: []
        propertyNames:
          pattern: ^[A-Z]$
          format: chain
        maxPropertiesFrom: molecules
    required: []
    additionalProperties: false
  uiSchema: {}
  tomlSchema:
    resdic:
      indexed: true
- id: seletop
  category: analysis
  label: Select a top models.
  description: HADDOCK3 module to select top cluster/model.
  schema:
    type: object
    properties:
      select:
        default: 200
        title: Number of best-ranked models to select
        description: Number of best-ranked models to select for further steps of the
          workflow
        $comment: Number of best-ranked models to select for further steps of the
          workflow. Typically only 200 models produced at the rigid-body docking stage
          are selected for further refinement.
        type: number
        maximum: 50000
        minimum: 1
    required: []
    additionalProperties: false
  uiSchema:
    select:
      ui:group: analysis
  tomlSchema: {}
- id: seletopclusts
  category: analysis
  label: Select a top cluster module.
  description: Haddock Module for 'seletopclusts'.
  schema:
    type: object
    properties:
      top_cluster:
        default: 1000
        title: Number of clusters to consider
        description: Number of clusters to consider (ranked by score)
        $comment: Number of clusters to consider (ranked by score)
        type: number
        maximum: 99999
        minimum: 1
      top_models:
        default: 10
        title: Number of best-ranked models to select per cluster
        description: Number of best-ranked models to select per cluster. By default,
          10 models are selected.
        $comment: Number of best-ranked models to select per cluster. By default,
          10 models are selected. If one expects to find many clusters (e.g., in the
          case of vague restraints), this number can be reduced to speed up the protocol.
          Instead, if few clusters are expected (very specific and localized restraints)
          this number can be increased.
        type: number
        maximum: 99999
        minimum: 1
    required: []
    additionalProperties: false
  uiSchema:
    top_cluster:
      ui:group: analysis
    top_models:
      ui:group: analysis
  tomlSchema: {}
- id: topoaa
  category: topology
  label: Create and manage CNS all-atom topology.
  description: HADDOCK3 module to create CNS all-atom topologies.
  schema:
    type: object
    properties:
      delenph:
        default: true
        title: Keep or remove non-polar hydrogen atoms
        description: If set to true, non-polar hydrogen atoms will be discarded to
          save computing time
        $comment: Since HADDOCK uses a united atom force field, the non-polar hydrogen
          atoms can be in principle discarded. This saves computing time. However
          this should not be done if you are defining distance restraints to specific
          hydrogen atoms (e.g. when using NMR distance restraints).
        type: boolean
      mol:
        title: Input molecule configuration
        $comment: You can expand this parameter and associated sub-parameters to the
          other input molecules. For example, if you input three molecules, you can
          define mol1, mol2, and mol3 subparameters. Those not defined will be populated
          with the defaults.
        type: array
        items:
          type: object
          properties:
            prot_segid:
              default: A
              title: Segment ID
              description: Segment ID assigned to this molecule
              $comment: Segment ID assigned to this molecule in CNS. Used to distinguish
                different molecules
              type: string
              minLength: 0
              maxLength: 4
              format: chain
            cyclicpept:
              default: false
              title: Cyclic peptide
              description: Defines the molecule as a cyclic peptide
              $comment: This option defines the molecule as a cyclic peptide and HADDOCK
                will generate a peptide bond between the N- and C-ter provided those
                are within 2A. This cutoff can be changed in the generate-topology.cns
                script.
              type: boolean
            nhisd:
              default: 0
              title: Number of HISD residue
              description: Defines the number of HISD residues (neutral HIS with the
                proton on the ND atom) residues when autohis=false
              $comment: Defines the number of HISD residues (neutral HIS with the
                proton on the ND atom) residues. The corresponding residue numbers
                must be defined in the following parameter (hisd_1, hisd_2, ...).
                Add as many as needed. Note that HIS is interpreted as a charged Histidine)
              type: number
              maximum: 9999
              minimum: 0
            hisd:
              type: array
              items:
                title: HISD residue number
                description: Residue number of the Histidine to be defined as HISD
                $comment: Residue number of the Histidine to be defined as HISD
                type: number
                maximum: 9999
                minimum: -9999
                format: residue
            nhise:
              default: 0
              title: Number of HISE residue
              description: Defines the number of HISE residues (neutral HIS with the
                proton on the NE atom) residues when autohis=false
              $comment: Defines the number of HISE residues (neutral HIS with the
                proton on the NE atom) residues. The corresponding residue numbers
                must be defined in the following parameter (hise_1, hise_2, ...).
                Add as many as needed. Note that HIS is interpreted as a charged Histidine)
              type: number
              maximum: 9999
              minimum: 0
            hise:
              type: array
              items:
                title: HISE residue number
                description: Residue number of the Histidine to be defined as HISE
                $comment: Residue number of the Histidine to be defined as HISE
                type: number
                maximum: 9999
                minimum: -9999
                format: residue
          required: []
          additionalProperties: false
        maxItemsFrom: molecules
    required: []
    additionalProperties: false
  uiSchema:
    delenph:
      ui:group: molecule
    mol:
      ui:indexable: true
      ui:group: input molecules
  tomlSchema:
    mol:
      indexed: true
      items:
        sectioned: true
        properties:
          hisd:
            indexed: true
          hise:
            indexed: true
examples:
  docking-protein-ligand: /examples/docking-protein-ligand.zip
